# ._ai_generator.py

## File Path

./autodocs/generators/._ai_generator.py

## Overview

This module provides a base class and related utilities for generating documentation using AI. It defines an abstract base class `AIGenerator` that outlines the structure for AI-powered documentation generators. It also includes a helper function for managing the OpenAI API key.

## Quick Reference

**Classes:**

*   `AIGenerator`: Abstract base class for AI-powered documentation generators.

**Functions:**

*   `get_openai_api_key()`: Retrieves the OpenAI API key from the environment.

## Detailed Documentation

### `AIGenerator` Class

**Purpose:**

An abstract base class for AI-powered documentation generators. Subclasses should implement the `generate_documentation` method to provide specific documentation generation logic.

**Attributes:**

*   `model_name` (str): The name of the AI model to use (e.g., "gpt-3.5-turbo").

**Methods:**

*   `__init__(self, model_name: str = "gpt-3.5-turbo")`: Initializes the AIGenerator with the specified model name.
    *   `model_name`: The name of the AI model to use. Defaults to "gpt-3.5-turbo".
*   `generate_documentation(self, code: str) -> str`: Abstract method to generate documentation for the given code.  Must be implemented by subclasses.
    *   `code`: The code to generate documentation for.
    *   Returns: The generated documentation as a string.
*   `_query_ai(self, prompt: str) -> str`: Protected method to query the AI model with a given prompt.  This method is intended to be used internally by subclasses.
    *   `prompt`: The prompt to send to the AI model.
    *   Returns: The AI's response as a string.

### `get_openai_api_key()` Function

**Purpose:**

Retrieves the OpenAI API key from the environment variable `OPENAI_API_KEY`.

**Usage:**

```python
from ._ai_generator import get_openai_api_key

api_key = get_openai_api_key()
if api_key:
    print("OpenAI API key found.")
else:
    print("OpenAI API key not found.  Please set the OPENAI_API_KEY environment variable.")
```

**Returns:**

*   `str`: The OpenAI API key if found, otherwise `None`.

## Usage Examples

The `AIGenerator` class is an abstract base class, so it cannot be instantiated directly.  Here's an example of how a subclass might be implemented and used:

```python
import os
from ._ai_generator import AIGenerator, get_openai_api_key

class MyDocumentationGenerator(AIGenerator):
    def __init__(self, model_name: str = "gpt-3.5-turbo"):
        super().__init__(model_name)

    def generate_documentation(self, code: str) -> str:
        prompt = f"Generate documentation for the following Python code:\n{code}"
        return self._query_ai(prompt)

    def _query_ai(self, prompt: str) -> str:
        api_key = get_openai_api_key()
        if not api_key:
            return "Error: OpenAI API key not found."

        # In a real implementation, you would use the OpenAI API here
        # For this example, we'll just return a placeholder.
        return f"Documentation generated by {self.model_name} for:\n{code}"


# Example usage:
if __name__ == '__main__':
    # Set the OPENAI_API_KEY environment variable (replace with your actual key)
    os.environ["OPENAI_API_KEY"] = "YOUR_OPENAI_API_KEY"

    generator = MyDocumentationGenerator()
    code_snippet = """
def add(x, y):
    \"\"\"Adds two numbers.\"\"\"
    return x + y
"""
    documentation = generator.generate_documentation(code_snippet)
    print(documentation)
```