# ._setup.py

## File Path

`./._setup.py`

## Overview

This module provides utility functions for setting up and managing the execution environment, specifically focusing on handling temporary directories and managing the current working directory. It's designed to ensure a clean and controlled environment for operations that might involve file system interactions.

## Quick Reference

**Functions:**

*   `get_temp_dir() -> str`: Returns the path to a temporary directory.
*   `with_temp_dir(func: Callable) -> Any`: A context manager that executes a function within a temporary directory.
*   `get_cwd() -> str`: Returns the current working directory.
*   `with_cwd(path: str, func: Callable) -> Any`: A context manager that executes a function within a specified directory.

## Detailed Documentation

### `get_temp_dir() -> str`

Returns the path to a temporary directory. This function leverages the `tempfile` module to create a unique temporary directory. The directory is created using `tempfile.mkdtemp()`.

**Returns:**

*   `str`: The absolute path to the created temporary directory.

### `with_temp_dir(func: Callable) -> Any`

A context manager that executes a provided function within a temporary directory. It creates a temporary directory, changes the current working directory to it, executes the provided function, and then cleans up the temporary directory (removes it and its contents).  It restores the original current working directory after execution.

**Parameters:**

*   `func: Callable`: The function to be executed within the temporary directory.  This function can accept any arguments and return any value.

**Returns:**

*   `Any`: The return value of the executed function.

**Raises:**

*   Any exceptions raised by the provided `func`.

### `get_cwd() -> str`

Returns the current working directory. This function uses `os.getcwd()` to retrieve the current working directory.

**Returns:**

*   `str`: The absolute path of the current working directory.

### `with_cwd(path: str, func: Callable) -> Any`

A context manager that executes a function within a specified directory. It changes the current working directory to the given `path`, executes the provided function, and then restores the original current working directory.

**Parameters:**

*   `path: str`: The path to the directory to change to.
*   `func: Callable`: The function to be executed within the specified directory. This function can accept any arguments and return any value.

**Returns:**

*   `Any`: The return value of the executed function.

**Raises:**

*   `FileNotFoundError`: If the specified `path` does not exist.
*   Any exceptions raised by the provided `func`.

## Usage Examples

While the exact implementation of the functions within the context managers is not provided, here are some illustrative examples of how they might be used:

**Example 1: Using `with_temp_dir`**

```python
import os
from typing import Callable, Any
import tempfile
import shutil

def get_temp_dir() -> str:
    """Returns the path to a temporary directory."""
    return tempfile.mkdtemp()

def with_temp_dir(func: Callable) -> Any:
    """A context manager that executes a function within a temporary directory."""
    temp_dir = get_temp_dir()
    original_cwd = os.getcwd()
    try:
        os.chdir(temp_dir)
        return func()
    finally:
        os.chdir(original_cwd)
        shutil.rmtree(temp_dir)

def my_function_that_uses_temp_dir():
    """A function that creates a file in the current directory."""
    with open("temp_file.txt", "w") as f:
        f.write("This is a temporary file.")
    return "File created successfully"

result = with_temp_dir(my_function_that_uses_temp_dir)
print(f"Result: {result}")
# The temp_file.txt will be created and then deleted automatically.
```

**Example 2: Using `with_cwd`**

```python
import os
from typing import Callable, Any

def get_cwd() -> str:
    """Returns the current working directory."""
    return os.getcwd()

def with_cwd(path: str, func: Callable) -> Any:
    """A context manager that executes a function within a specified directory."""
    original_cwd = os.getcwd()
    try:
        os.chdir(path)
        return func()
    finally:
        os.chdir(original_cwd)

def my_function_that_uses_cwd():
    """A function that prints the current working directory."""
    return get_cwd()

# Assuming a directory 'my_directory' exists
if not os.path.exists("my_directory"):
    os.makedirs("my_directory")

result = with_cwd("my_directory", my_function_that_uses_cwd)
print(f"Current directory within the context: {result}")
print(f"Current directory outside the context: {get_cwd()}")
```